## 15. 프로퍼티 정의 

### 1. 프로퍼티정의 

- 뜻 : 프로퍼티 어트리뷰트의 값을 정의하여 프로퍼티의 상태를 관리하는 것을 말함

- 프로퍼티 상태(프로퍼티 어트리뷰트)의 종류 : 

  1. 프로퍼티 값을 갱신 가능하도록 하는지 안하는지 (writable)
  2. 프로퍼티를 열거 가능하도록 하는지 안하는지 (enumerable)
  3. 프로퍼티를 재정의 가능하도록 하는지 안하는지 (configurable)

- 프로퍼티를 정의를 왜할까?

  1. 객체의 프로퍼티가 어떻게 동작해야 하는지를 명확히 정의하기 위해

- 프로퍼티 정의를 언제할까?

  1. 프로퍼티를 생성할 때, 자바스크립트 엔진이 프로퍼티의 상태를 나타내는 프로퍼티 어트리뷰트를 기본값을 자동 정의함
  2. 사용자가 원할때

- 프로퍼티 어트리뷰트를 어떻게 참조할까?

  1. Object.getOwnPropertyDescriptor 메소드를 사용해 참조함

     - 이 메소드는 프로퍼티 어트리 뷰트리 뷰트 정보를 제공하는 객체인 프로퍼티 디스크립터를 반환

     - 존재 하지 않는 프로퍼티 , 상속받은 프로퍼티에 대한 프로퍼티 디스크립터를 요구하면 undefined가 반환됨

     - 인수는 

       1. 객체의 참조

       2. 데이터 프로퍼티의 키

          를 문자열로 전달

- 프로퍼티의 종류:

  1. 데이터 프로퍼티
     - 정의 : 키와 값으로 구성된 일반적인 프로퍼티
  2. 접근자 프로퍼티 
     - 정의 : 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나 저장할때 사용하는 접근자 함수(getter / setter 함수)

### 2. 내부 슬롯/ 메소드

- 정의 : 

  자바스크립트 엔진이 코드를 실행하는 알고리즘을 설명하기 위해 ECMAScript 스펙에서 사용하는 의사 프로퍼티(Pseudo property)와 의사 메소드(Pseudo method)이다.

- 특징 : 

  1. 내부 슬롯과 내부 메소드는 객체의 프로퍼티가 아님
  2. 직접적으로 접근하거나 호출할 수 있는 방법 원칙적으로 제공 안함
  3. 일부 내부 슬롯과 내부 메소드에 간접적으로 접근할 수 있는 수단 있음.

- 예시 :

  1. Get

     1. 동작 순서 :

        1. 프로퍼티 키가 유효한지 확인한다. 프로퍼티 키는 문자열 또는 심볼이여야됨

        2. 프로토타입 체인에서 프로퍼티를 검색

        3. 검색된 프로퍼티가 “데이터 프로퍼티” 라면 

           프로퍼티 값, 즉 데이터 프로퍼티의 프로퍼티 어트리뷰트의 값을 그대로 반환

        4. 검색된 프로퍼티가 “접근자 프로퍼티” 라면

           접근자 프로퍼티의 프로퍼티 어트리뷰트 [[Get]]의 값, 즉 getter 함수를 호출하여 

           그 결과를 반환



### 3. 프로퍼티 어트리뷰트

- Tip : 

  데이터 프로퍼티와, 접근자 프로퍼티는 자신의 상태와 동작을 정의한 내부 슬롯/ 메소드를 가지고 있다.



- 데이터 프로퍼티의 어트리뷰트

  1. [[Value]]

     1. 설명 : 

        - 프로퍼티 키로 프로퍼티 값에 접근하면 내부 메소드 [[Get]]에 의해 반환되는 값

        - 프로퍼티 키로 프로퍼티 값을 저장하면 [[Value]]에 값을 저장한다. 이때 프로퍼티가 없으면 프로퍼티를 생성하고 생성된 프로퍼티의 [[Value]]에 값을 저장한다.

     2. 프로퍼티 디스크립터 객체의 프로퍼티 : 

        value

  2. [[Writable]] 

     1. 설명 : 

        - 프로티 값의 변경 가능 여부를 나타내며 불리언 값을 갖는다.

        - [[Writable]] 의 값이 false인 경우, 해당 프로퍼티의 [[value]]의 값 변경 불가능

     2. 프로퍼티 디스크립터 객체의 프로퍼티

        writable

  3. [[Enumerable]]

     1. 설명 : 

        - 프로퍼티의 열거 가능 여부를 나타내며 불리언 값을 갖는다.

        - [[Enumerable]]의 값이 false인 경우, 해당 프로퍼티는 for..in 문이나 Object.keys 메소드 등으로 열거 할수 없다.

     2. 프로퍼티 디스크립터 객체의 프로퍼티

        - enumerable

  4. [[Configurable]]

     1. 설명 : 

        - 프로퍼티의 재정의 가능 여부를 나타내며 불리언 값을 갖는다.

        - [[Configurable]]의 값이 false인 경우, 해당 프로퍼티의 삭제, 프로퍼티 어트리뷰트 값의 변경이 금지된다. 단, [[Writable]]이 true인 경우, [[Value]]의 변경과 [[Writable]]을 false로 변경하는 것은 허용된다.

     2. 프로퍼티 디스클비터 객체의 프로퍼티

        - configurable



- 접근자 프로퍼티의 어트리뷰트

  1. [[Get]]
     1. 설명 : 
        - 접근자 프로퍼티를 통해 데이터 프로퍼티의 값을 읽을 때 호출되는 접근자 함수
        - 접근자 프로퍼티 키로 프로퍼티 값에 접근하면 프로퍼티 어트리뷰트 [[Get]]의 값, 즉 getter 함수가 호출되고 그 결과가 프로퍼티 값으로 반환
     2. 프로퍼티 디스크립터 객체의 프로퍼티
        - get
  2. [[Set]]
     1. 설명 :
        - 접근자 프로퍼티를 통해 데이터 프로퍼티의 값을 저장할 때 호출되는 접근자 함수
        - 접근자 프로퍼티 키로 프로퍼티 값을 저장하면 프로퍼티 어트리뷰트 [[Set]]의 값, 즉 setter 함수가 호출되고 그 결과가 프로퍼티 값으로 저장된다.
     2. 프로퍼티 디스크립터 객체의 프로퍼티
        - set
  3. [[Enumerable]]
     1. 설명 : 
        - 데이터 프로퍼티의 [[enumerable]]와 같다.
     2. 프로퍼티 디스크립터 객체의 프로퍼티
        - enumerable
  4. [[Configurable]]
     1. 설명 :
        - 데이터 프로퍼티의 [[Configurable]]와 같다.
     2. 프로퍼티 디스크립터 객체의 프로퍼티
        - configurable

- 데이터 프로퍼티와 접근자 프로퍼티의 어트리뷰트의 기본값

  | 프로퍼티 디스크립터 객체의 프로퍼티 | 대응하는 프로퍼티 어트리뷰트 | 디스크립터 객체의 프로퍼티 누락시의 기본값 |
  | :---------------------------------: | :--------------------------: | :----------------------------------------: |
  |                value                |          [[Value]]           |                 undefined                  |
  |                 get                 |           [[Get]]            |                 undefined                  |
  |                 set                 |           [[Set]]            |                 undefined                  |
  |              writable               |         [[Writable]]         |                   false                    |
  |             enumerable              |        [[Enumerable]]        |                   false                    |
  |            configurable             |       [[Configurable]]       |                   false                    |

  

## 16. 생성자 함수에 의한 객체 생성

### 1. 생성자 함수

- 정의 : new 연산자와 함께 호출하여 객체(인스턴스)를 생성하는 함수를 말함

  

- 정의 방법 : 

  - 일반 함수와 동일한 방법으로 함수를 정의 

  - new 연산자와 함께 호출하면 해당 함수는 생성자 함수로 동작

    

- 용어정리 : 

  1. 인스턴스 : 생성자 함수나 클래스가 생성한 객체

  2. this : 

     - 객체 자신의 프로퍼티나 메소드를 참조하기 위한 자기 참조 변수
     - this가 가리키는 값, 즉 this 바인딩은 함수 호출 방식에 따라 동적으로 결정

     |    함수 호출 방식    |           this가 가리키는 값           |
     | :------------------: | :------------------------------------: |
     |  일반 함수로서 호출  |               전역 객체                |
     |   메소드로서 호출    |          메소드를 호출한 객체          |
     | 생성자 함수로서 호출 | 생성자 함수가 (미래에) 생성할 인스턴스 |

  3. super 키워드 : 

     - ES6에서 도입된 클래스에서 부모 클래스를 참조할 때 또는 부모 클래스의 생성자를 호출할때 사용함

  4. 바인딩 : 

     - 식별자와 값을 연결하는 과정을 의미 ex) 변수는 할당에 의해 값이 바인딩 된다.

- 종류 

  1. Object 생성자 함수
     1. 특징 : 
        1. new 연산자랑 Object 생성자 함수 호출하면 빈 객체 생성해서 반환함.
        2. 빈 객체 생성한 이후 프로퍼티 , 메소드를 추가하여 객체를 완성할 수 있음.
  2. String, Number, Boolean, Function, Array, Date, RegExp 생성자 함수

  

- 객체 리터럴에 의한 객체 생성방식에 비해 장점

  

  1. 객체 리터럴에 의한 객체 생성 방식의 단점
     - 동일한 프로퍼티를 갖는 객체를 여러 개 생성해야 하는경우, 매번 같은 프로퍼티를 기술해야 하기 때문에 비효율적임.
  2. 생성자 함수에 의한 객체 생성 방식의 장점
     - 프로퍼티 구조가 동일한 객체 여러 개를 간편하게 생성할 수 있음

  

- 내부 메소드 [[Call]] 과 [[Construct]]

  - 함수 객체는 일반 객체의 내부 슬롯과 내부 메소드를 모두 가지고 있다.

  - 함수 객체는 함수로서 동작하기 위해 일반 객체의 내부 슬롯과 내부 메소드 이외에 아래와 같은 내부 슬롯과 내부 메소드를 추가적으로 가지고 있다.

    - callable : 

      내부 메소드 [[Call]]을 갖는 함수 객체

      호출할 수 있는 객체

      

    - constructor : 

      내부 메소드[[Construct]]를 갖는 함수 객체

      생성자 함수로서 호출할수 있는 객체

      new 연산자(또는 super 연산자)와 함께 호출할수 있는 객체

    - non - constructor : 내부 메소드 [[Construct]]를 갖지 않는 함수 객체

  - 함수 객체는 2가지로 나뉜다.

    1. callable 이면서 constructor 
    2. callable 이면서 non-constructor 

  - constructor 와 non-constructor의 구분을 어떻게 할까?

    1. 일반 함수로 정의된 함수만 constructor
    2. Arrow, Method함수는 non-constructor

- 생성자 함수의 인스턴스 생성 과정

  1. 인스턴스 생성과 this  바인딩 암묵적으로 빈 객체(생성자 함수가 생성한 인스턴스)가 생성됨
  2. 생성자 함수가 생성한 인스턴스의 프로토타입으로 생성자 함수의 prototype 프로퍼티가 가리키는 객체가 설정됨
  3. 암묵적으로 생성된 빈 객체, 인스턴스는 this에 바인딩 됨.



### 2. new.target

- 왜 쓰는가 ? : 

  new 연산자 없이 생성자 함수를 호출하는 위험성을 회피하기 위해

  new 연산자와 함께 함수가 호출되었는지 확인하기 위해

  ​	(함수가 new 연산자와 함께 호출되면 함수 내부의 new.target은 함수 자신을 가리킴)

  ​	(new 연산자 없이 호출된 함수 내부의 new.target은 undefined)

- 어떻게 쓰이는가? : 모든 함수 내부에서 암묵적인 지역 변수와 같이 사용



## 17. 함수와 일급 객체

### 1. 일급 객체

- 일급 객체일 조건 
  1. 무명의 리터럴로 생성할 수 있다. 런타임에 생성이 가능
  2. 변수나 자료 구조(객체, 배열 등)에 저장할 수 있다.
  3. 함수의 매개 변수에게 전달할 수 있다.
  4. 함수의 결과값으로 반환할 수 있다.



### 2. 함수형 프로그래밍

- 의미 : 순수 함수와 보조 함수의 조합을 통해 외부 상태를 변경하는 부수 효과를 최소화하여 불변성을 지향하는 프로그래밍 패러다임



### 3. 함수 객체의 프로퍼티

- 특징 : 일반 객체에는 없는 arguments, caller, length, name, prototype 프로퍼티가 함수 객체에는 존재 한다.



#### 3-1. arguments 프로퍼티

- 특징 :

  1. 프로퍼티 값은 arguments 객체
  2. arguments 객체는 함수 호출시 전달된 인수들의 정보를 담고 있는 순회가능한 유사배열객체
  3. 함수 내부에서 지역 변수처럼 사용됨.
  4. 선언된 매개변수의 개수보다 인수를 적게 전달했을 경우 인수가 전달되지 않은 매개변수는 undefined로 초기화된 상태를 유지함.
  5. 초과된 인수는 암묵적으로 arguments 객체의 프로퍼티로 보관됨

- Tip : 

  1. arguments 객체의 Symbol(Symbol.iterator) 프로퍼티

     설명 : arguments 객체를 순회 가능한 자료 구조인 인터러블로 만들기 위한 프로퍼티다.



#### 3-2. caller 프로퍼티

- 정의 : ECMAScript 스펙에 포함되지 않은 비표준 프로퍼티
- 특징 : 함수 자신을 호출한 함수를 가리킨다.



#### 3-3. length 프로퍼티

- 특징 : 함수 정의 시 선언한 매개변수의 개수를 가리킴.

- 주의점 : 

  arguments 객체의 length 프로퍼티와 함수 객체의 length 프로퍼티의 값은 다를 수 있으므로 주의해야됨. 

  arguments 객체의 length 프로퍼티는 인자의 개수를 가리키고, 함수 객체의 length 프로퍼티는 매개 변수의 개수를 가리킨다.



#### 3-4. name 프로퍼티

- 특징 : 

  1. 함수 이름을 나타냄
  2. ES6 이전까지는 비표준이었지만 ES6에서 정식 표준이 됨

- 주의점 : 

  ES5와 ES6에서 동작을 달리함

  ES5에서의 name 프로퍼티는 빈 문자열을 가짐

  ES6에서의 name 프로퍼티는 함수 객체를 가리키는 변수 이름을 값으로 가짐



#### 3-5. __ proto __ 접근자 프로퍼티

- 정의 : 

  [[Prototype]] 내부 슬롯이 가리키는 프로토타입 객체에 접근하기 위해 사용하는 접근자 프로퍼티임.

- 특징 :

  1. 내부 슬롯에 직접 접근할 수 없고 간접적인 접근 방법을 제공하는 경우에 한하여 접근가능



#### 3-6. prototype 프로퍼티

- 특징 : 
  1. 함수 객체만이 소유하는 프로퍼티
  2. 일반 객체에는 prototype 프로퍼티가 없음
  3. 함수가 객체를 생성하는 생성자 함수로 사용될 때, 생성자 함수가 생성할 인스턴스의 프로토타입 객체를 가리킴